(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{43:function(t,e,a){},46:function(t,e,a){"use strict";a.r(e);var c=a(0),s=a(1),n=a.n(s),r=a(21),i=a.n(r),o=a(6),l=a(33),d=a(13),u=(a(43),a(4)),b=a.n(u),j=a(11),p=a(15),h=a(16),m=a(18),O=a(17),x=function(){var t=Object(j.a)(b.a.mark((function t(e){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("/react-ecommerce-app","/api/products.json"),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return a=t.sent,t.next=5,a.json();case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(t){return function(){var e=Object(j.a)(b.a.mark((function e(a){var c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:c=e.sent,s=[],c.forEach((function(e){(e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()))&&s.push(e)})),a({type:"SEARCHED_PRODUCTS",payloads:s});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(t){return{type:"ADD_TO_BASKET",payloads:t}},k=function(t){return{type:"DELETE_FROM_BASKET",payloads:t}},y=a(12),N=a(3),g=a.p+"static/media/basket.fe58a027.svg",S=a.p+"static/media/login.c47b10f3.svg",w=function(t){Object(m.a)(a,t);var e=Object(O.a)(a);function a(){var t;Object(p.a)(this,a);for(var c=arguments.length,s=new Array(c),n=0;n<c;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).state={inputValue:"",path:"/searchfor"},t}return Object(h.a)(a,[{key:"handleInput",value:function(t){this.setState({inputValue:t.target.value})}},{key:"handleSubmit",value:function(t){this.props.searchedProducts(this.state.inputValue),this.props.history.push("/searchfor/query=".concat(this.state.inputValue))}},{key:"render",value:function(){var t=this;return Object(c.jsx)("div",{children:Object(c.jsxs)("nav",{className:"navbar navbar-expand-sm bg-light rounded navbar-light",children:[Object(c.jsxs)("form",{className:"form-inline mr-auto",children:[Object(c.jsx)("h2",{children:Object(c.jsx)(y.b,{to:"/",children:"HOME"})}),Object(c.jsx)("input",{onChange:function(e){t.handleInput(e)},className:"form-control mr-sm-2",type:"text",placeholder:"Search"}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),t.handleSubmit(e)},className:"btn btn-primary",type:"submit",children:Object(c.jsx)("i",{className:"fas fa-search"})})]}),Object(c.jsxs)("ul",{className:"navbar-nav",children:[Object(c.jsx)("li",{className:"nav-item active mx-2",children:Object(c.jsxs)("h5",{children:[Object(c.jsx)("span",{children:Object(c.jsx)("img",{src:S,alt:"login"})})," ","Log in"]})}),Object(c.jsx)("li",{className:"nav-item mx-2",children:Object(c.jsx)("h5",{children:Object(c.jsxs)(y.b,{to:"/basket",className:"text-decoration-none",children:[Object(c.jsx)("span",{children:Object(c.jsx)("img",{src:g,alt:"basket"})})," ","Basket",Object(c.jsx)("span",{className:"num-of-pro bg-danger text-white rounded p-1",children:this.props.products.allproducts.basket.length})]})})})]})]})})}}]),a}(n.a.Component),T=Object(o.b)((function(t){return{products:t}}),{searchedProducts:f})(Object(N.e)(w)),A=a(24),E=function(t){Object(m.a)(a,t);var e=Object(O.a)(a);function a(){var t;Object(p.a)(this,a);for(var c=arguments.length,s=new Array(c),n=0;n<c;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))).imageSet=function(t){return"http://wp.uzinfobiz.ru/".concat(t.image)},t}return Object(h.a)(a,[{key:"trancateTitle",value:function(t,e){return t.length>e&&(t=t.substring(0,e)+"..."),t}},{key:"render",value:function(){var t="productdetail";return t=t.replace("productdetail","/productdetail/".concat(this.props.product.id)),Object(c.jsx)("div",{className:" mx-1",children:Object(c.jsxs)("div",{className:"card",style:{width:"220px"},children:[Object(c.jsx)("img",{className:"card-img-top w-100",src:this.imageSet(this.props.product),style:{height:"160px"},alt:"Card"}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:this.trancateTitle(this.props.product.name,20)}),Object(c.jsx)("p",{className:"card-text",children:this.trancateTitle(this.props.product.description,50)}),Object(c.jsx)("span",{className:"fa fa-star checked"}),Object(c.jsx)("span",{className:"fa fa-star checked"}),Object(c.jsx)("span",{className:"fa fa-star checked"}),Object(c.jsx)("span",{className:"fa fa-star"}),Object(c.jsx)("span",{className:"fa fa-star"}),Object(c.jsxs)("div",{className:"d-flex mt-3 justify-content-between",children:[Object(c.jsxs)("h6",{className:"",children:["$",this.props.product.price]}),Object(c.jsx)("p",{className:"bg-primary text-white p-1",children:Object(c.jsx)(y.b,{to:t,className:"text-white",children:"MORE INFO"})})]})]})]})})}}]),a}(n.a.Component),C=Object(o.b)((function(t){return t}))((function(t){var e=Object(s.useState)([]),a=Object(A.a)(e,2),n=a[0],r=a[1];return function(){var t=Object(j.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,r(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"d-flex flex-wrap justify-content-center",children:n?n.map((function(t){return Object(c.jsx)(E,{product:t},t.id)})):"No"})})})),B=Object(o.b)((function(t){return t}),{addToBasket:v,deleteFromBasket:k})((function(t){var e=Object(s.useState)([]),a=Object(A.a)(e,2),n=a[0],r=a[1],i=[];Object(s.useEffect)((function(){var t=!1;return t||l(),function(){return t=!0}}),[]);var o,l=function(){var t=+window.location.pathname.substr(15,4);t&&u(t)},d=function(t,e){var a=t.findIndex((function(t){return t.id===e}));return t[a]},u=function(){var t=Object(j.a)(b.a.mark((function t(e){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("/react-ecommerce-app","/api/products.json"));case 3:return a=t.sent,t.next=6,a.json();case 6:c=t.sent,i.push(d(c,e)),r(i),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),p=function(e){return t.allproducts.basket.some((function(t){return t.id===e.id}))};return t.allproducts.basket.length&&localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket)),Object(c.jsx)("div",{children:Object(c.jsx)("div",{children:n.length?Object(c.jsx)("div",{className:"card-box mb-3 mt-5",style:{maxWidth:"1100px"},children:Object(c.jsxs)("div",{className:"row g-0",children:[Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsx)("img",{src:(o=n[0].image,"http://wp.uzinfobiz.ru".concat(o)),alt:"...",className:"w-100"})}),Object(c.jsx)("div",{className:"col-md-8",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:n[0].name}),Object(c.jsx)("p",{className:"card-text",children:n[0].description}),Object(c.jsx)("p",{className:"card-text",children:Object(c.jsxs)("big",{className:"text-muted",children:["Hurry up, Left ",n[0].amount," on stock"]})}),Object(c.jsxs)("p",{className:"card-text",children:["Price: ",n[0].price,"$"]}),Object(c.jsx)("button",{onClick:function(){p(n[0])?t.deleteFromBasket(n[0].id):(n[0].quantity=1,n[0].subtotal=1*n[0].price,t.addToBasket(n[0]))},className:p(n[0])?"btn btn-secondary":"btn btn-primary",children:p(n[0])?"Added to Basket":"Add to Basket"})]})})]})}):"Nothing found"})})})),_=Object(o.b)((function(t){return t}),{searchedProducts:f,addToBasket:v,deleteFromBasket:k})((function(t){Object(s.useEffect)((function(){var e=window.location.pathname.substring(17);t.searchedProducts(e)}),[]);var e=function(e){return t.allproducts.basket.some((function(t){return t.id===e.id}))};return t.allproducts.basket.length&&localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket)),Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"mt-5",children:t.allproducts.searchedProducts?t.allproducts.searchedProducts.map((function(a){return Object(c.jsx)("div",{className:"card-box mb-3",style:{maxWidth:"1100px"},children:Object(c.jsxs)("div",{className:"row g-0",children:[Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsx)("img",{src:(s=a.image,"http://wp.uzinfobiz.ru".concat(s)),alt:"...",className:"w-100 "})}),Object(c.jsx)("div",{className:"col-md-8",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:a.name}),Object(c.jsx)("p",{className:"card-text",children:a.description}),Object(c.jsx)("p",{className:"card-text",children:Object(c.jsxs)("big",{className:"text-muted",children:["Hurry up, Left ",a.amount," on stock"]})}),Object(c.jsxs)("p",{className:"card-text",children:["Price: ",a.price,"$"]}),Object(c.jsx)("button",{onClick:function(){var c;e(c=a)?t.deleteFromBasket(c.id):(c.quantity=1,c.subtotal=1*c.price,t.addToBasket(c))},className:e(a)?"btn btn-secondary":"btn btn-primary",children:e(a)?"Added to Basket":"Add to Basket"})]})})]})});var s})):Object(c.jsx)("div",{children:'"Nothig found this query"'})})})})),D=a.p+"static/media/delete.e33ca2c9.svg",I=Object(o.b)((function(t){return t}),{changeQuantityandSubtotal:function(t){return{type:"CHANGE_QUANTITY",payloads:t}},deleteFromBasket:k})((function(t){return t.allproducts.basket.length&&localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket)),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"row mt-5",children:[Object(c.jsx)("div",{className:"col-md-9",children:Object(c.jsx)("div",{children:Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"Products in Basket"}),Object(c.jsx)("th",{scope:"col",children:"Price"}),Object(c.jsx)("th",{scope:"col",children:"Quantity"}),Object(c.jsx)("th",{scope:"col",children:"SubTotal"})]})}),Object(c.jsx)("tbody",{children:t.allproducts.basket&&t.allproducts.basket.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:Object(c.jsxs)("div",{className:"d-flex",children:[Object(c.jsx)("img",{src:(a=e.image,"http://wp.uzinfobiz.ru/".concat(a)),alt:"...",className:"table-image"}),Object(c.jsx)("h6",{className:"pl-3 mt-3",children:e.name})]})}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"mt-3",children:[Object(c.jsxs)("h5",{children:[e.price,"$"]}),Object(c.jsxs)("h6",{children:["Left ",e.amount]})]})}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"input-group mb-3 form-width mt-4",children:[Object(c.jsx)("span",{onClick:function(){!function(e){var a=t.allproducts.basket.findIndex((function(t){return t.id===e.id}));if(a>=0&&t.allproducts.basket[a].quantity<e.amount){var c=t.allproducts.basket[a].quantity+1;t.changeQuantityandSubtotal({quantity:c,index:a}),localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket))}}(e)},className:"input-group-text",children:"+"}),Object(c.jsx)("input",{onChange:function(a){!function(e,a){t.allproducts.basket.forEach((function(t,e){t.subtotal}));var c=t.allproducts.basket.findIndex((function(t){return t.id===a.id}));c>=0&&+e>=1&&+e<=a.amount&&(localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket)),t.changeQuantityandSubtotal({quantity:e,index:c}),localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket)))}(a.target.value,e)},min:"1",max:e.amount,value:e.quantity,type:"number",className:"form-control form-control-input","aria-label":"Amount (to the nearest dollar)"}),Object(c.jsx)("span",{onClick:function(){!function(e){var a=t.allproducts.basket.findIndex((function(t){return t.id===e.id}));if(a>=0&&t.allproducts.basket[a].quantity>1){var c=t.allproducts.basket[a].quantity-1;t.changeQuantityandSubtotal({quantity:c,index:a}),localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket))}}(e)},className:"input-group-text",children:"-"})]})}),Object(c.jsxs)("td",{children:[Object(c.jsxs)("h5",{className:"mt-3",children:[e.subtotal,"$"]}),Object(c.jsx)("button",{onClick:function(){!function(e){localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket)),t.deleteFromBasket(e.id),localStorage.setItem("bookmarks",JSON.stringify(t.allproducts.basket))}(e)},className:"btn btn-secondary",children:Object(c.jsx)("img",{src:D,alt:"delete"})})]})]},e.id);var a}))})]})})}),Object(c.jsx)("div",{className:"col-md-3",children:Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"card text-center ",style:{width:"100%",height:"100%"},children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:"Total Price"}),Object(c.jsxs)("p",{className:"card-text",children:["Total:",function(){var e=0;return t.allproducts.basket.forEach((function(t,a){e+=t.subtotal})),e}(),"$"]}),Object(c.jsx)(y.b,{to:"/checkout",className:"btn btn-primary",children:"Order product"})]})})})})]})})})),P=function(t){Object(m.a)(a,t);var e=Object(O.a)(a);function a(t){var c;return Object(p.a)(this,a),(c=e.call(this,t)).props.getAllProducts(),c}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=Object(j.a)(b.a.mark((function t(){var e,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=localStorage.getItem("bookmarks"))&&(e=JSON.parse(a),this.props.uploadToBasket(e));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(c.jsx)("div",{className:"container bg-white mt-5 container-h-100",children:Object(c.jsxs)(y.a,{children:[Object(c.jsx)(T,{}),Object(c.jsx)(N.a,{path:"/basket",exact:!0,component:I}),Object(c.jsx)(N.a,{path:"/",exact:!0,component:C}),Object(c.jsx)(N.a,{path:"/searchfor",component:_}),Object(c.jsx)(N.a,{path:"/productdetail",component:B})]})})}}]),a}(n.a.Component),L=Object(o.b)((function(t){return{allproducts:t.allproducts}}),{getAllProducts:function(){return function(){var t=Object(j.a)(b.a.mark((function t(e){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/products.json");case 2:return a=t.sent,t.next=5,a.json();case 5:c=t.sent,e({type:"GETALL_PRODUCTS",payloads:c});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},uploadToBasket:function(t){return{type:"ADD_TO_BASKET_FROM",payloads:t}}})(P),q=a(25),J=a(5),R={searchedProducts:[],allproducts:[],basket:[]},F=Object(d.c)({allproducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SEARCHED_PRODUCTS":return Object(J.a)(Object(J.a)({},t),{},{searchedProducts:Object(q.a)(e.payloads)});case"GETALL_PRODUCTS":return Object(J.a)(Object(J.a)({},t),{},{allproducts:Object(q.a)(e.payloads)});case"ADD_TO_BASKET":return Object(J.a)(Object(J.a)({},t),{},{basket:[].concat(Object(q.a)(t.basket),[e.payloads])});case"DELETE_FROM_BASKET":return Object(J.a)(Object(J.a)({},t),{},{basket:t.basket.filter((function(t){return t.id!==e.payloads}))});case"CHANGE_QUANTITY":return Object(J.a)(Object(J.a)({},t),{},{basket:t.basket.map((function(t,a){return a===e.payloads.index?Object(J.a)(Object(J.a)({},t),{quantity:e.payloads.quantity,subtotal:t.price*e.payloads.quantity}):t}))});case"ADD_TO_BASKET_FROM":return Object(J.a)(Object(J.a)({},t),{},{basket:e.payloads});case"ADD_ALL_PRODUCT":return console.log(e.payloads),Object(J.a)(Object(J.a)({},t),{},{allproducts:e.payloads});default:return t}}}),z=Object(d.d)(F,Object(d.a)(l.a));i.a.render(Object(c.jsx)(o.a,{store:z,children:Object(c.jsx)(L,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.75ea37bb.chunk.js.map